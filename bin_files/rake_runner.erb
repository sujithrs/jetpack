#!/usr/bin/env ruby
#
# The application 'rake' is installed as part of a gem, and
# this file is here to facilitate running it.
#

require 'rubygems'

# This is calculated at runtime to avoid complications that crop up when you
# are running jetpack from a separate Gemfile to the rest of the app.
bundled_rake = Dir["vendor/bundle/jruby/<%= @settings.ruby_version %>/gems/rake-*/lib"][0]
if bundled_rake
  $LOAD_PATH.unshift(File.expand_path(bundled_rake))

  require 'rake'
  Rake.application.run
else
  # Using a fallback rake provided by rubygems
  version = ">= 0"
  gem 'rake', version
  load Gem.bin_path('rake', 'rake', version)
end
